!(function (c, t) {
  c(document).ready(function () {
    jconfirm.defaults = {
      closeIcon: !0,
      backgroundDismiss: !0,
      escapeKey: !0,
      animationBounce: 1,
      useBootstrap: !1,
      theme: "modern",
      boxWidth: "400px",
      columnClass: "mhk-responsive-class",
    };
  }),
    c(".colorpick")
      .iris({
        change: function (e, t) {
          c(this)
            .parent()
            .find(".colorpickpreview")
            .css({ backgroundColor: t.color.toString() });
        },
        hide: !0,
        border: !0,
      })
      .on("click focus", function (e) {
        e.stopPropagation(),
          c(".iris-picker").hide(),
          c(this).closest("td").find(".iris-picker").show(),
          c(this).data("original-value", c(this).val());
      })
      .on("change", function () {
        c(this).is(".iris-error") &&
          (c(this)
            .data("original-value")
            .match(/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/)
            ? c(this).val(c(this).data("original-value"))
            : c(this).val("")
          ).change();
      }),
    c("body").on("click", function () {
      c(".iris-picker").hide();
    }),
    c(function () {
      var e = !1;
      c("input, textarea, select, checkbox").change(function () {
        e = !0;
      }),
        c(".mhk-nav-tab-wrapper a").click(function () {
          window.onbeforeunload = e
            ? function () {
                return t.i18n_nav_warning;
              }
            : "";
        }),
        c(".submit :input").click(function () {
          window.onbeforeunload = "";
        });
    }),
    c(".muhiku-plug").on("click", ".select_all", function () {
      return (
        c(this)
          .closest("td")
          .find("select option")
          .attr("selected", "selected"),
        c(this).closest("td").find("select").trigger("change"),
        !1
      );
    }),
    c(".muhiku-plug").on("click", ".select_none", function () {
      return (
        c(this).closest("td").find("select option").removeAttr("selected"),
        c(this).closest("td").find("select").trigger("change"),
        !1
      );
    }),
    c("input#muhiku_forms_recaptcha_type")
      .change(function () {
        var e = c("#muhiku_forms_recaptcha_v2_site_key").parents("tr").eq(0),
          t = c("#muhiku_forms_recaptcha_v2_secret_key").parents("tr").eq(0),
          s = c("#muhiku_forms_recaptcha_v2_invisible_site_key")
            .parents("tr")
            .eq(0),
          r = c("#muhiku_forms_recaptcha_v2_invisible_secret_key")
            .parents("tr")
            .eq(0),
          i = c("#muhiku_forms_recaptcha_v2_invisible").parents("tr").eq(0),
          a = c("#muhiku_forms_recaptcha_v3_site_key").parents("tr").eq(0),
          _ = c("#muhiku_forms_recaptcha_v3_secret_key").parents("tr").eq(0);
        (recaptcha_v3_threshold_score = c(
          "#muhiku_forms_recaptcha_v3_threshold_score"
        )
          .parents("tr")
          .eq(0)),
          (hcaptcha_site_key = c("#muhiku_forms_recaptcha_hcaptcha_site_key")
            .parents("tr")
            .eq(0)),
          (hcaptcha_secret_key = c(
            "#muhiku_forms_recaptcha_hcaptcha_secret_key"
          )
            .parents("tr")
            .eq(0)),
          c(this).is(":checked") &&
            ("v2" === c(this).val()
              ? (c("#muhiku_forms_recaptcha_v2_invisible").is(":checked")
                  ? (e.hide(), t.hide(), s.show(), r.show())
                  : (s.hide(), r.hide(), e.show(), t.show()),
                i.show(),
                a.hide(),
                _.hide(),
                hcaptcha_site_key.hide(),
                hcaptcha_secret_key.hide(),
                recaptcha_v3_threshold_score.hide())
              : "hcaptcha" === c(this).val()
              ? (i.hide(),
                s.hide(),
                r.hide(),
                a.hide(),
                _.hide(),
                recaptcha_v3_threshold_score.hide(),
                e.hide(),
                t.hide(),
                hcaptcha_site_key.show(),
                hcaptcha_secret_key.show())
              : (e.hide(),
                t.hide(),
                i.hide(),
                s.hide(),
                r.hide(),
                hcaptcha_site_key.hide(),
                hcaptcha_secret_key.hide(),
                a.show(),
                _.show(),
                recaptcha_v3_threshold_score.show()));
      })
      .change(),
    c("input#muhiku_forms_recaptcha_v2_invisible").change(function () {
      c(this).is(":checked")
        ? (c("#muhiku_forms_recaptcha_v2_site_key").parents("tr").eq(0).hide(),
          c("#muhiku_forms_recaptcha_v2_secret_key").parents("tr").eq(0).hide(),
          c("#muhiku_forms_recaptcha_v2_invisible_site_key")
            .parents("tr")
            .eq(0)
            .show(),
          c("#muhiku_forms_recaptcha_v2_invisible_secret_key")
            .parents("tr")
            .eq(0)
            .show())
        : (c("#muhiku_forms_recaptcha_v2_site_key").parents("tr").eq(0).show(),
          c("#muhiku_forms_recaptcha_v2_secret_key").parents("tr").eq(0).show(),
          c("#muhiku_forms_recaptcha_v2_invisible_site_key")
            .parents("tr")
            .eq(0)
            .hide(),
          c("#muhiku_forms_recaptcha_v2_invisible_secret_key")
            .parents("tr")
            .eq(0)
            .hide());
    }),
    c(".muhiku_forms_send_email_test").on("click", function (e) {
      e.preventDefault();
      e = {
        action: "muhiku_forms_send_test_email",
        email: c("#muhiku_forms_email_send_to").val(),
        security: mhk_email_params.ajax_email_nonce,
      };
      c.ajax({
        url: mhk_email_params.ajax_url,
        data: e,
        type: "post",
        beforeSend: function () {
          c(".muhiku_forms_send_email_test")
            .closest(".muhiku_forms_send_email_test")
            .append('<i class="mhk-loading mhk-loading-active"></i>'),
            c(".muhiku-froms-send_test_email_notice").remove();
        },
        complete: function (e) {
          var t = "";
          c(".muhiku_forms_send_email_test")
            .closest(".muhiku_forms_send_email_test")
            .find(".mhk-loading")
            .remove(),
            c(".muhiku-froms-send_test_email_notice").remove(),
            (t =
              !0 === e.responseJSON.success
                ? (c("#muhiku_forms_email_send_to").val(""),
                  '<div id="message" class="updated inline muhiku-froms-send_test_email_notice"><p><strong>' +
                    e.responseJSON.data.message +
                    "</strong></p></div>")
                : '<div id="message" class="error inline muhiku-froms-send_test_email_notice"><p><strong>' +
                  e.responseJSON.data.message +
                  "</strong></p></div>"),
            c(".muhiku-plug-settings").find("h2").after(t);
        },
      });
    });
})(jQuery, muhiku_forms_settings_params);
