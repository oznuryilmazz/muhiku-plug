jQuery(document).ready(function (r) {
  r(".mhk-image-uploader").click(function (e) {
    (mhk_uploader = r(this)), e.preventDefault();
    var t = wp
      .media({
        library: { type: ["image"] },
        title: mhk_uploader.upload_file,
        multiple: !1,
      })
      .open()
      .on("select", function (e) {
        var r = t.state().get("selection").first().toJSON().url;
        mhk_uploader.attr("src", r),
          mhk_uploader.hasClass("mhk-button")
            ? (mhk_uploader.prev().removeClass("muhiku-plug-hidden"),
              mhk_uploader.prev().attr("src", r),
              mhk_uploader.next().val(r),
              mhk_uploader.remove())
            : (mhk_uploader.attr("src", r), mhk_uploader.next().next().val(r));
      });
  });
});
