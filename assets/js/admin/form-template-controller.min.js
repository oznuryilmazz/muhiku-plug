jQuery(function (n) {
  var i = {
    all: "#mhk-form-all",
    basic: "#mhk-form-basic",
    pro: "#mhk-form-pro",
    results: mhk_templates.mhk_template_all,
    init: function () {
      i.latch_hooks();
    },
    latch_hooks: function () {
      n(document.body).ready(function () {
        n(i.all).click(function (e) {
          e.preventDefault(), i.sort_all(this);
        }),
          n(i.basic).click(function (e) {
            e.preventDefault(), i.sort_basic(this);
          }),
          n(i.pro).click(function (e) {
            e.preventDefault(), i.sort_pro(this);
          }),
          n(".page-title-action").click(function (e) {
            e.stopImmediatePropagation(),
              n(this).html(
                mhk_templates.template_refresh +
                  ' <div  class="mhk-loading mhk-loading-active"></div>'
              );
          });
      });
    },
    sort_all: function (e) {
      i.class_update(n(e)), i.render_results(i.results, "all");
    },
    sort_basic: function (e) {
      i.class_update(n(e)), i.render_results(i.results, "free");
    },
    sort_pro: function (e) {
      i.class_update(n(e)), i.render_results(i.results, "pro");
    },
    class_update: function (e) {
      n(".muhiku-plug-tab-nav").removeClass("active"),
        e.parent().addClass("active");
    },
    render_results: function (e, l) {
      var r = n(".mhk-setup-templates");
      if (!e)
        return (
          n("#message").remove(),
          r.html('<div  class="mhk-loading mhk-loading-active"></div>'),
          void window.setTimeout(function () {
            i.render_results(i.results, l);
          }, 1e3)
        );
      n(".muhiku-plug-form-template").html(""),
        e.forEach(function (e) {
          var t = "",
            a = e.plan.includes("free") ? "free" : "pro",
            s = n(".muhiku-plug-form-template").data("license-type");
          ("all" !== l && "blank" !== e.slug && a !== l) ||
            (t = i.template_snippet(e, a, s)),
            r.append(t);
        });
    },
    template_snippet: function (e, t, a) {
      var s = "",
        l = "mhk-template-select";
      return (
        (a = "" === a ? "free" : a.replace("-lifetime", "")),
        e.plan.includes("free") || e.plan.includes(a) || (l = "upgrade-modal"),
        (s +=
          '<div class="muhiku-plug-template-wrap mhk-template" id="muhiku-plug-template-' +
          e.slug +
          '" data-plan="' +
          t +
          '">'),
        "blank" !== e.slug
          ? (s += '<figure class="muhiku-plug-screenshot" ')
          : (s +=
              '<figure class="muhiku-plug-screenshot mhk-template-select" '),
        (s +=
          'data-template-name-raw="' +
          e.title +
          '" data-template="' +
          e.slug +
          '" data-template-name="' +
          e.title +
          ' template">'),
        (s +=
          '<img src=" ' +
          mhk_templates.mhk_plugin_url +
          "/assets/" +
          e.image +
          ' ">'),
        "blank" !== e.slug &&
          ((s +=
            '<div class="form-action"><a href="#" class="muhiku-plug-btn muhiku-plug-btn-primary ' +
            l +
            '" data-licence-plan="' +
            a +
            '" data-template-name-raw="' +
            e.title +
            '" data-template-name="' +
            e.title +
            ' template" data-template="' +
            e.slug +
            '">' +
            mhk_templates.i18n_get_started +
            "</a>"),
          (s +=
            '<a href="' +
            e.preview_link +
            '" target="_blank" class="muhiku-plug-btn muhiku-plug-btn-secondary">' +
            mhk_templates.i18n_get_preview +
            "</a></div>")),
        e.plan.includes("free") ||
          (s +=
            '<span class="muhiku-plug-badge muhiku-plug-badge--success">' +
            (e.plan.includes("personal")
              ? "Personal"
              : e.plan.includes("plus")
              ? "Plus"
              : e.plan.includes("professional")
              ? "Professional"
              : "Agency") +
            "</span>"),
        (s += '</figure><div class="muhiku-plug-form-id-container">'),
        (s +=
          '<a class="muhiku-plug-template-name ' +
          l +
          '" href="#" data-template-name-raw="' +
          e.title +
          '" data-licence-plan="' +
          a +
          '" data-template="' +
          e.slug +
          '" data-template-name="' +
          e.title +
          ' template">' +
          e.title +
          "</a></div>")
      );
    },
  };
  i.init();
});
